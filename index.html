<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
	<link rel="stylesheet" href="index-style.css">
    <link rel="icon" type="image/png" href="pictures/favicong.png">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>By The Book</title>
	<meta name="description" content="Discover your next favorite story with Dr. Meow! Join By The Book for daily recommendations, a gamified reading experience, and the chance to earn 'Mice' for free books.">
	<meta name="keywords" content="books, book recommendations, Dr. Meow, Percy Jackson, reading community, earn books, book tracker">
	<meta name="author" content="Dotan Hillel">
	<meta property="og:title" content="By The Book | Daily Book Recommendations">
	<meta property="og:description" content="Let Dr. Meow guide your reading journey. Earn rewards while discovering great books!">
	<meta property="og:image" content="https://Dotan-666.github.io/By-The-Book/assets/dr-meow-share.jpg"> 
	<meta property="og:url" content="https://Dotan-666.github.io/By-The-Book/index.html">
	<meta name="twitter:card" content="summary_large_image">
  </head>
  <body style="margin: 0; padding: 0;">
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
    
	<div class="header">
        <table border="0" width="100%" cellspacing="0">
          <tr bgcolor="#941C04" height="150">
            <td colspan="6" width="70%"><img src="pictures/logo.png" height="150px"></td>
            <td colspan="1" width="30%" style="text-align: center; vertical-align: middle; padding: 10px; padding-left: 120px;"><div class="header-actions">
            <div class="auth-wrapper">
				<button type="button" class="account-btn">
					<i class="fa-solid fa-circle-user"></i> GUEST MODE
				</button>
				<button type="button" class="sign-in" onclick="toggleAuthTooltip(event)">
					SIGN IN
				</button>

				<div id="authTooltip" class="auth-tooltip">
					<span class="close-tooltip" onclick="toggleAuthTooltip(event)"> &times; </span>
					<div class="tooltip-arrow"></div>
					<h3>Join the Club üêæ</h3>
        
					<button class="tooltip-option google" onclick="loginWithGoogle()">
						<img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="16">
						Google Sign-in
					</button>

					<div class="separator"><span>or</span></div>

					<button class="tooltip-option email" onclick="location.href='login.html'">
						<i class="fa-solid fa-envelope"></i> Email / Password
					</button>
				</div>
			</div></td>
          </tr>
          <tr bgcolor="#5E0B00" height="50" style="text-align: center; font-weight: bold; color: white;">
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Fantasy</a></td>
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Science-Fiction</a></td>
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Kids</a></td>
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Adults</a></td>
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Teenagers</a></td>
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Thriller</a></td>
          <td width="14%"><a style="color: white; text-decoration: none; cursor: pointer;">Search üîç</a></td>
          </tr>
        </table>
	</div>

    <div class="main-container">
		<aside class="barrier"> 
			<div class="side-item-active">
				<i class="fa-solid fa-book"></i>
				<span>Main Library</span>
			</div>
    
			<div class="side-item">
				<i class="fa-solid fa-user"></i>
				<span>My Profile</span>
			</div>
    
			<div class="side-item">
				<i class="fa-solid fa-bookmark"></i>
				<span>My Bookshelf</span>
			</div>
    
			<div class="side-item">
				<i class="fa-regular fa-comments"></i>
				<span>Chats & Community</span>
			</div>
			
			<div class="side-item">
				<i class="fa-solid fa-newspaper"></i>
				<span>News & Updates</span>
			</div>
		
			<div class="side-item">
				<i class="fa-solid fa-upload"></i>
				<span>Upload A Book</span>
			</div>
    
			<div class="side-item">
				<i class="fa-solid fa-list"></i>
				<span>Full Book List</span>
			</div>
			
			<div class="side-item">
				<i class="fa-solid fa-gear"></i>
				<span>Settings</span>
			</div>
		</aside>
	    <div>
		<main class="site-info">
        <div class="daily-box">
            <div style="flex-shrink: 0;">
                <img id="rec-img" src="" alt="Book Cover" class="book-img" style="display: none;">
            </div>

            <div style="flex: 2; padding-top: 50px;">
                <span class="daily-badge">Daily Recommendation ‚Äî By Dr. Meow</span>
                <h2 id="rec-full" style="margin: 10px 0; color: #555555; font-size: 28px; margin-top: 30px;">Loading...</h2>
				<p id="rec-rating" style="font-size: 18px; margin-bottom: 5px; color: #555555;"></p>
                <p id="rec-author" style="color: #555555; font-style: italic; margin-bottom: 20px; font-size: 18px;"></p>
                <p id="rec-description" style="color: #555555; line-height: 1.7; font-size: 16px; margin-bottom: 25px;"></p>
				
				<style>
					#rec-link-btn:hover{
						color: #777777;
						transform: scale(1.05);
					}
				</style>
                <button style="color: #444444; background-color: #f0f0f0; padding: 8px 20px; border-radius: 50px; font-weight: bold; margin-bottom: 40px; cursor: pointer;" id="rec-link-btn">
				READ FULL REVIEW</button>
            </div>

            <div class="Dr-Meow-box">
			    <img src="pictures/Dr.meow/Dr.Meow.base.png" style="max-width: 180px; filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.2));">
			    <div class="meow-speech">
				    <p style="color: #555555;"><strong>Dr. Meow says:</strong><br>
                    "Unlock my secret library! Sign in and let my whiskers guide you to your next favorite story."</p>
			    </div>
			</div>
        </div>

			<div class="popular-new-box" id="popular-container">
				<div style="width: 100%;"><span class="badge">Most Popular This Week</span></div>
			</div>
			
			<div class="popular-new-box" id="new-container">
				<div style="width: 100%;"><span class="badge">You Might Also Like</span></div>
			</div>
		</div>
		</main>
    </div>

    <div class="footer">
	    <div class="col-f" style="flex: 1 1 250px;">
            <strong>Quick Links</strong><br><br>
		    <a href="contact.html">Contact Us</a><br>
			<a href="about.html">About Us</a><br>
			<a href="#">Support the Site</a>
		</div>
		<div class="col-f" style="flex: 1 1 250px;">
		    <strong>Follow Dr. Meow</strong><br><br>
			<a href="#">Whatsapp</a> | <a href="#">Youtube</a><br>
			<a href="#">Facebook</a> | <a href="#">Instagram</a>
		</div>
		<div class="col-f" style="flex: 1 1 250px;">
		    <strong>Our Network</strong><br><br>
		    <a href="moovie.html">By The Moovie</a><br>
			<a href="game.html">By The Game</a>
		</div>
		
		<div style="text-align: center; width: 100%; margin-top: 10px; border-top: 1px solid #333; padding-top: 20px;">
			<hr color="#2c2c2c" width="90%">
		    <p style="font-size: 14px; color: #888;">&copy; 2025 Dotan Hillel. All rights reserved.</p>
            <p style="font-size: 11px; color: #555;"></p>
		</div>
	</div>
	
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCVC-CQK_umSHnPT5FOvvclut_WN2Ll0to",
            authDomain: "by-the-book-3120c.firebaseapp.com",
            projectId: "by-the-book-3120c",
            storageBucket: "by-the-book-3120c.firebasestorage.app",
            messagingSenderId: "795787841752",
            appId: "1:795787841752:web:52b7657d0ffe31739847ad",
            measurementId: "G-7EC8YT427C"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function loadSiteData() {
            try {
                const snapshot = await db.collection("books").get();
                const allBooks = [];
                
                snapshot.forEach(doc => {
                    allBooks.push({ id: doc.id, ...doc.data() });
                });

                if (allBooks.length > 0) {
                    showRandomBook(allBooks);
                    displayBooksByCategory(allBooks);
                }
            } catch (error) {
                console.error("Error loading cloud data:", error);
            }
        }
		
        function showRandomBook(books) {
            const randomIndex = Math.floor(Math.random() * books.length);
            const book = books[randomIndex];

            document.getElementById('rec-full').innerText = (book.series || "") + ": " + book.title;
            document.getElementById('rec-author').innerText = "By: " + book.author;
            document.getElementById('rec-description').innerText = book.description;
            document.getElementById('rec-rating').innerText = "Rating: " + book.paws;
        
            const img = document.getElementById('rec-img');
            img.src = book.image;
            img.style.display = "block";

            document.getElementById('rec-link-btn').onclick = function() {
                window.location.href = "book.html?id=" + book.id; 
            };
        }

        function displayBooksByCategory(books) {
            const popularContainer = document.getElementById('popular-container');
            const newContainer = document.getElementById('new-container');

            books.forEach((book) => {
                const bookHTML = `
                    <div class="book-item" style="text-align: center; margin: 10px;">
                        <a href="book.html?id=${book.id}">
                            <img src="${book.image}" class="book-img">
                        </a>
                        <h3 style="font-size: 15px; margin: 10px 0; max-width: 200px; color: #555555;">
                            ${book.series ? book.series + ': ' : ''}${book.title}
                        </h3>
                        <a href="book.html?id=${book.id}" class="abadge" style="padding: 8px 15px; font-size: 12px; text-decoration: none;">VIEW BOOK</a>
                    </div>
                `;

                if (book.status === "popular") {
                    popularContainer.innerHTML += bookHTML;
                } else if (book.status === "new") {
                    newContainer.innerHTML += bookHTML;
                }
            });
        }

        document.addEventListener('DOMContentLoaded', loadSiteData);
		
		function toggleAuthTooltip(event) {
			event.stopPropagation(); 
			const tooltip = document.getElementById('authTooltip');
			tooltip.style.display = (tooltip.style.display === 'block') ? 'none' : 'block';
		}

		window.onclick = function() {
			document.getElementById('authTooltip').style.display = 'none';
		};

        window.addEventListener('click', function(e) {
            const details = document.querySelector('details');
            if (details && details.open && !details.contains(e.target)) {
                details.removeAttribute('open'); 
            }
        });
    </script>
  </body>
</html>